import{d as y,c as n,l as c,n as g,o as i,b as k,s as B,r,a as e,f as m,v as _,g as v,y as x,t as N,w as P,F as $,i as j}from"./index-xSkt6JiG.js";import{_ as q}from"./SelectFilter.vue_vue_type_script_setup_true_lang-DtYte4Lg.js";import{L as D}from"./LoadingAnimation-BTnrbdfQ.js";const E={key:0,class:"inline-block"},F={key:1,class:"inline-block w-5"},L=y({__name:"SaveButton",props:{loading:{type:Boolean},dirty:{type:Boolean}},setup(b){return(t,a)=>(i(),n("span",{title:"Save",class:g([t.dirty?"bg-yellow-200 hover:bg-yellow-300":"","flex flex-col justify-center rounded-sm px-2 py-1"])},[t.loading===!1?(i(),n("button",E," save ")):(i(),n("span",F,[c(D)]))],2))}}),M=e("h1",{class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"}," My Profile ",-1),U={class:"w-full"},A={class:"flex flex-col"},C={class:"flex items-center justify-between"},R={class:"mt-4"},T=e("h2",{class:"p-4 text-2xl font-bold text-neutral-900"}," Preferences ",-1),z={class:"flex flex-col p-4 md:min-w-96 md:items-start md:justify-center"},I={class:"flex flex-col"},Y=e("label",{class:"text-neutral-700"},"Default Supplier",-1),G={class:"flex gap-1"},O=y({__name:"ProfileView",setup(b){var f;const t=k(),{firstName:a,lastName:o,preferences:h}=B(t),d=r(!1),p=r((f=h.value)==null?void 0:f.defaultSupplier),w=r(""),V=r(!1),S=async function(){var s;if(d.value=!0,((s=t.user)==null?void 0:s.id)===void 0){alert("You must be logged in to save preferences.");return}const{error:u}=await j.from("profiles").update({first_name:a.value,last_name:o.value}).eq("id",t.user.id);u&&alert(`Error saving preference: ${u.message}`),t.loadProfile(),d.value=!1};return(u,s)=>(i(),n($,null,[M,e("form",{class:"flex flex-col p-4 md:min-w-96 md:items-center md:justify-center",onSubmit:s[2]||(s[2]=P(l=>S(),["prevent"]))},[e("div",U,[e("div",A,[m(e("input",{class:"my-2 h-12 rounded-md border border-gray-200 p-2",required:"",type:"text",placeholder:"First Name","onUpdate:modelValue":s[0]||(s[0]=l=>x(a)?a.value=l:null)},null,512),[[_,v(a)]]),m(e("input",{class:"my-2 h-12 rounded-md border border-gray-200 p-2",required:"",type:"text",placeholder:"Last Name","onUpdate:modelValue":s[1]||(s[1]=l=>x(o)?o.value=l:null)},null,512),[[_,v(o)]])]),e("div",C,[c(L,{loading:d.value,dirty:!0},null,8,["loading"])]),e("div",R,[e("span",{class:g(V.value?"text-red-500":"text-neutral-700")},N(w.value),3)])])],32),T,e("div",z,[e("div",I,[Y,e("div",G,[c(q,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=l=>p.value=l),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"])])])])],64))}});export{O as default};
