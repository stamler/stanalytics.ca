import{d as x,c as o,l as c,n as y,o as r,b as S,s as k,r as a,a as e,f as _,v,t as B,w as P,F as $,i as j}from"./index-fNjIOEz0.js";import{_ as q}from"./SelectFilter.vue_vue_type_script_setup_true_lang-DbLzFKRI.js";import{L as D}from"./LoadingAnimation-5dxG5IrP.js";const E={key:0,class:"inline-block"},F={key:1,class:"inline-block w-5"},L=x({__name:"SaveButton",props:{loading:{type:Boolean},dirty:{type:Boolean}},setup(g){return(t,p)=>(r(),o("span",{title:"Save",class:y([t.dirty?"bg-yellow-200 hover:bg-yellow-300":"","flex flex-col justify-center rounded-sm px-2 py-1"])},[t.loading===!1?(r(),o("button",E," save ")):(r(),o("span",F,[c(D)]))],2))}}),M=e("h1",{class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"}," My Profile ",-1),U={class:"w-full"},A={class:"flex flex-col"},C={class:"flex items-center justify-between"},T={class:"mt-4"},z=e("h2",{class:"p-4 text-2xl font-bold text-neutral-900"}," Preferences ",-1),I={class:"flex flex-col p-4 md:min-w-96 md:items-start md:justify-center"},R={class:"flex flex-col"},Y=e("label",{class:"text-neutral-700"},"Default Supplier",-1),G={class:"flex gap-1"},O=x({__name:"ProfileView",setup(g){var f;const t=S(),{firstName:p,lastName:b,preferences:h}=k(t),n=a(!1),i=a(p.value),d=a(b.value),m=a((f=h.value)==null?void 0:f.defaultSupplier),w=a(""),N=a(!1),V=async function(){var s;if(n.value=!0,((s=t.user)==null?void 0:s.id)===void 0){alert("You must be logged in to save preferences.");return}const{error:u}=await j.from("profiles").update({first_name:i.value.trim(),last_name:d.value.trim()}).eq("id",t.user.id);u&&alert(`Error saving preference: ${u.message}`),t.loadProfile(),n.value=!1};return(u,s)=>(r(),o($,null,[M,e("form",{class:"flex flex-col p-4 md:min-w-96 md:items-center md:justify-center",onSubmit:s[2]||(s[2]=P(l=>V(),["prevent"]))},[e("div",U,[e("div",A,[_(e("input",{class:"my-2 h-12 rounded-md border border-gray-200 p-2",required:"",type:"text",placeholder:"First Name","onUpdate:modelValue":s[0]||(s[0]=l=>i.value=l)},null,512),[[v,i.value]]),_(e("input",{class:"my-2 h-12 rounded-md border border-gray-200 p-2",required:"",type:"text",placeholder:"Last Name","onUpdate:modelValue":s[1]||(s[1]=l=>d.value=l)},null,512),[[v,d.value]])]),e("div",C,[c(L,{loading:n.value,dirty:!0},null,8,["loading"])]),e("div",T,[e("span",{class:y(N.value?"text-red-500":"text-neutral-700")},B(w.value),3)])])],32),z,e("div",I,[e("div",R,[Y,e("div",G,[c(q,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=l=>m.value=l),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"])])])])],64))}});export{O as default};
