import{_ as w}from"./lodash-B9dtiTTH.js";import{f as Z,b as L}from"./RefreshButton.vue_vue_type_script_setup_true_lang-M8JRiPs0.js";import{o as n,c as a,a as s,d as M,y,r as p,e as D,F as v,z as _,m as g,l as N,g as h,x as T,t as k,A as $,n as E,p as q,_ as z}from"./index-GpNGBtmz.js";function I(m,i){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-.53 14.03a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72V8.25a.75.75 0 0 0-1.5 0v5.69l-1.72-1.72a.75.75 0 0 0-1.06 1.06l3 3Z","clip-rule":"evenodd"})])}function P(m,i){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm.53 5.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72v5.69a.75.75 0 0 0 1.5 0v-5.69l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z","clip-rule":"evenodd"})])}function G(m,i){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const H={key:0},J={class:"flex flex-wrap"},Q={id:"tablecontainer"},R={key:0},U=["onClick"],W={class:"inline-block h-5 w-4"},X=["onClick"],Y={key:0},K={key:1},ee=M({__name:"ObjectTable",props:{tableData:{type:Array,required:!0},tableConfig:{type:Object,default:()=>({columnFormatters:[],omitColumns:[]}),required:!1}},setup(m){const i=Math.random().toString(36).substring(7),x=function(t){return t.length>0&&t[0].id!==void 0?t:t.map((l,e)=>(l["_idx_"+i]=e,l))},B=function(t){return t==null||t.map(l=>{Object.keys(l).forEach(e=>{l[e]!==null&&typeof l[e]=="object"&&(Object.keys(l[e]).forEach(o=>{l[`${e}_${o}`]=l[e][o]}),delete l[e])})}),t},C=y(()=>{const t={...f.tableConfig.columnFormatters};for(const[l,e]of Object.entries(t))e==="dollars"&&(t[l]=Z),e==="percent"&&(t[l]=L);return t}),j=function(t,l){return C.value[t]!==void 0?C.value[t](l):l},u=p([]),d=p(""),c=p(0),r=p([]),f=m,b=y(()=>{const t=Object.keys(r.value[0]).filter(e=>e!==`_idx_${i}`),l=f.tableConfig.omitColumns||[];return r.value===void 0||r.value.length===0?[]:t.filter(e=>!l.includes(e))}),F=y(()=>{if(r.value===void 0||r.value.length===0)return{};const t={};for(const l of b.value)typeof r.value[0][l]=="number"?t[l]="text-right":t[l]="text-left";return t});D(()=>f.tableData,()=>{u.value=[],d.value="",c.value=0,r.value=x(f.tableData)}),D([u,d,c],()=>{r.value=B(x(f.tableData)),r.value=S(),A()},{deep:!0});const O=function(t){d.value=t,c.value=(c.value+1)%3},A=function(){switch(c.value){case 0:return;case 1:return r.value=w.orderBy(r.value,d.value,"asc");case 2:return r.value=w.orderBy(r.value,d.value,"desc")}},V=function(t){u.value=u.value.filter(l=>l!==t)},S=function(){return r.value===void 0?[]:r.value.filter(t=>u.value.every(l=>t[l.key]===l.value))};return(t,l)=>r.value!==void 0||Array.isArray(r.value)?(n(),a("div",H,[s("div",J,[(n(!0),a(v,null,_(u.value,e=>(n(),a("div",{class:"mb-2 mr-2 flex rounded-sm border border-blue-700 bg-blue-200 px-2 py-1",key:e.key},[N(h(G),{class:"w-5 pr-1",onClick:o=>V(e)},null,8,["onClick"]),T(" "+k(e.key+": "+e.value),1)]))),128))]),s("div",Q,[r.value.length>0?(n(),a("table",R,[s("thead",null,[s("tr",null,[(n(!0),a(v,null,_(b.value,e=>(n(),a("th",{class:"align-bottom",key:e},[s("a",{class:"hover:underline",title:"sort",onClick:o=>O(e)},k(e),9,U),s("span",W,[d.value===e?(n(),a(v,{key:0},[c.value===2?(n(),$(h(I),{key:0,class:"w-5"})):c.value===1?(n(),$(h(P),{key:1,class:"w-5"})):(n(),a(v,{key:2},[],64))],64)):g("",!0)])]))),128))])]),s("tbody",null,[(n(!0),a(v,null,_(r.value,e=>(n(),a("tr",{key:e.id},[(n(!0),a(v,null,_(b.value,o=>(n(),a("td",{class:E(["pr-4",F.value[o]]),key:o},[s("a",{class:"hover:underline",onClick:te=>u.value.push({key:o,value:e[o]})},k(j(o,e[o])),9,X)],2))),128)),t.$slots.rowActions?(n(),a("td",Y,[q(t.$slots,"rowActions",{id:e.id,idx:e[`_idx_${h(i)}`]},void 0,!0)])):g("",!0)]))),128))])])):(n(),a("span",K,"No Data"))])])):g("",!0)}}),ae=z(ee,[["__scopeId","data-v-ee81cef8"]]);export{ae as O};
